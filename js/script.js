/**
 * Combined and minified script file containin all custom scripts.
 */

/**
 * func.js
 */
$(document).ready(function(){if(fetchQuote(),checkSettings(),$("select").dropdown(),$("#auto-refresh-quote-toggle").is(":checked"))var t=setInterval(function(){$("#quote, #author, #suggestor").css("opacity","0"),setTimeout(fetchQuote,300)},15e3);$("#new-quote").click(function(){$("#quote, #author, #suggestor").css("opacity","0"),setTimeout(fetchQuote,300)}),$(".popup-toggle").click(function(){var t=$(this).attr("data-popup");$(".popup-toggle").not(this).removeClass("active"),$(this).toggleClass("active"),$(".popup:not(#"+t+")").removeClass("active"),$("#"+t).toggleClass("active")}),$("#grid-btn").click(function(){$("#top-sites").toggleClass("active"),$("#grid-btn").toggleClass("active"),$("#quote-wrapper").toggleClass("top-sites-active")}),$("#facebook").click(function(t){return t.preventDefault(),window.open($(this).attr("href"),"fbShareWindow","height=450, width=550, top="+($(window).height()/2-275)+", left="+($(window).width()/2-225)+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0"),!1}),$(".settings-toggle").change(function(){var o=$(this).attr("data-context");$("#"+o).toggleClass("active"),"top-sites"===o&&($("#grid-btn").toggleClass("active"),$("#quote-wrapper").toggleClass("top-sites-active")),"background"===o&&$("#background-image").toggleClass("show"),"auto-refresh"===o&&($("#auto-refresh-quote-toggle").is(":checked")?t=setInterval(function(){$("#quote, #author, #suggestor").css("opacity","0"),setTimeout(fetchQuote,300)},15e3):clearInterval(t)),storeSettings()}),$(".color").click(function(){var t=$(this).attr("data-context"),o=$(this).attr("data-color");$("#"+t+"-list .color").removeClass("selected"),$(this).addClass("selected"),"background-color"===t?document.documentElement.style.setProperty("--background-color",o):"font-color"===t&&document.documentElement.style.setProperty("--font-color",o),storeSettings()}),$(".dropdown-link").click(function(){var t=$(this).parent().parent().parent().parent().parent().parent().prev("select").attr("data-context"),o=$(this).find("span").text(),e=[];"quote"===t?(setFont(o,t),e.quoteFont=o):"author"===t&&(setFont(o,t),e.authorFont=o),storeSettings(e)}),$(".color").each(function(){var t=$(this).attr("data-color");$(this).css("background",t)})});var defaultSettings={quoteFont:"Source Serif Pro",authorFont:"Source Sans Pro",alwaysShowTopSites:!1,showBackgroundImage:!0,autoRefreshQuote:!1,backgroundColor:"#34495e",fontColor:"#ecf0f1"},defaultFonts=["Arial","Source Serif Pro","Source Sans Pro"],offlineQuotes=[{quote:"I don't like to hold back, because that's how you hurt yourself.",author:"Chester Bennington"},{quote:"You can't be afraid of people willing to hurt you, cause if you fear life, then you will never live.",author:"Chester Bennington"},{quote:"The truth is you don't know what is going to happen tomorrow. Life is a crazy ride, and nothing is guaranteed.",author:"Eminem"},{quote:"I say what I want to say and do what I want to do. There's no in between. People will either love you for it or hate you for it.",author:"Eminem"},{quote:"Don't let your dreams be dreams. Just do it.",author:"Shia LaBeouf"}];function checkSettings(){var t=localStorage.getItem("settings");t||(storeSettings(defaultSettings),t=localStorage.getItem("settings")),t&&(setFont((t=JSON.parse(t)).quoteFont,"quote"),$("#quote-font-select").val(t.quoteFont),setFont(t.authorFont,"author"),$("#author-font-select").val(t.authorFont),document.documentElement.style.setProperty("--background-color",t.backgroundColor),$("#background-color-list .color").removeClass("selected"),$("#background-color-list .color[data-color='"+t.backgroundColor+"']").addClass("selected"),document.documentElement.style.setProperty("--font-color",t.fontColor),$("#font-color-list .color").removeClass("selected"),$("#font-color-list .color[data-color='"+t.fontColor+"']").addClass("selected"),!0===t.alwaysShowTopSites&&($("#quote-wrapper").toggleClass("top-sites-active"),setTimeout(function(){$("#top-sites").toggleClass("active"),$("#grid-btn").toggleClass("active")},1e3),$("#top-sites-toggle").prop("checked",!0)),!1===t.showBackgroundImage?($("#background-image").removeClass("show"),$("#background-toggle").prop("checked",!1)):$("#background-image-loader").on("load",function(){var t=$("#background-image-loader").attr("src");$("#background-image").css("background-image","url("+t+")"),$("#background-image").css("opacity","0.25")}),!0===t.autoRefreshQuote?$("#auto-refresh-quote-toggle").prop("checked",!0):$("#auto-refresh-quote-toggle").prop("checked",!1))}function storeSettings(t){defaultSettings=t||new Object({}),quoteFont=defaultSettings.quoteFont||$("#quote-font-select option:selected").val(),authorFont=defaultSettings.authorFont||$("#author-font-select option:selected").val(),alwaysShowTopSites=defaultSettings.alwaysShowTopSites||$("#top-sites-toggle").is(":checked"),showBackgroundImage=defaultSettings.showBackgroundImage||$("#background-toggle").is(":checked"),autoRefreshQuote=defaultSettings.autoRefreshQuote||$("#auto-refresh-quote-toggle").is(":checked"),backgroundColor=defaultSettings.backgroundColor||$("#background-color-list").find(".selected").attr("data-color"),fontColor=defaultSettings.fontColor||$("#font-color-list").find(".selected").attr("data-color");var o={quoteFont:quoteFont,authorFont:authorFont,alwaysShowTopSites:alwaysShowTopSites,showBackgroundImage:showBackgroundImage,autoRefreshQuote:autoRefreshQuote,backgroundColor:backgroundColor,fontColor:fontColor};localStorage.setItem("settings",JSON.stringify(o))}function fetchQuote(){navigator.onLine?$.ajax({url:"https://d6ebctiu66.execute-api.eu-central-1.amazonaws.com/prod",dataType:"json",success:function(t){$("#quote").html(t.quote),$("#author").html(t.author),setTimeout(function(){$("#quote, #author").css("opacity","1")},250),void 0!==t.suggestor&&($("#suggestor").html("Quote suggested by "+t.suggestor),setTimeout(function(){$("#suggestor").css("opacity","1")},250)),$("#background-image-loader").attr("src","https://s3.eu-central-1.amazonaws.com/quotesnewtab/"+convertAuthorName(t.author)+".jpg"),$("#twitter").attr("href","https://twitter.com/intent/tweet?text="+encodeURIComponent('"'+t.quote+'" – '+t.author)+"&via=QuotesNewTab"),$("#facebook").attr("href","https://www.facebook.com/dialog/share?app_id=1796316614011305&display=popup&href=https://chrome.google.com/webstore/detail/quotes-new-tab/fnhpicigolcacikdjdocmkfnplmefadg&quote="+encodeURIComponent('"'+t.quote+'" – '+t.author))}}):fetchOfflineQuote()}function fetchOfflineQuote(){var t=offlineQuotes[Math.floor(Math.random()*offlineQuotes.length)];$("#quote").html(t.quote),$("#author").html(t.author),setTimeout(function(){$("#quote, #author").css("opacity","1")},250),$("#background-image-loader").attr("src","../images/offline/"+convertAuthorName(t.author)+".jpg"),$(".share").addClass("hide"),$("#offline-notice").addClass("show")}function showBackgroundWhenLoaded(){$("#background-image-loader").one("load",function(){var t=$("#background-image-loader").attr("src");$("#background-image").css("background-image","url("+t+")"),$("#background-image").css("opacity","0.25")}).each(function(){this.complete&&$(this).load()})}function loadFont(t,o){WebFont.load({google:{families:[t]},classes:!1,active:function(){"quote"===o?document.documentElement.style.setProperty("--quote-font",t):"author"===o&&document.documentElement.style.setProperty("--author-font",t)}})}function setFont(t,o){-1!==defaultFonts.indexOf(t)?"quote"===o?document.documentElement.style.setProperty("--quote-font",t):"author"===o&&document.documentElement.style.setProperty("--author-font",t):loadFont(t,o)}function convertAuthorName(t){return t.toLowerCase().replace(/\s+/g,"-").replace(/[, .]+/g,"")}$(document).mouseup(function(t){var o=$("#info-popup"),e=$("#info-btn"),a=$("#settings-popup"),r=$("#settings-btn");o.is(t.target)||e.is(t.target)||0!==o.has(t.target).length||0!==e.has(t.target).length||(o.removeClass("active"),e.removeClass("active")),a.is(t.target)||r.is(t.target)||0!==a.has(t.target).length||0!==r.has(t.target).length||(a.removeClass("active"),r.removeClass("active"))});

/**
 * available-logotypes.js
 */
var availableLogotypes=["4chan","aftonbladet","allabolag","amazon","apple","baidu","bankofamerica","bbc","behance","bing","blogger","blogspot","bootstrap","buzzfeed","change","chase","cnn","codepen","craigslist","deviantart","diply","dribbble","dropbox","ebay","espn","expressen","facebook","flashback","flickr","flipkart","getbootstrap","github","godaddy","google","hitta","hotstar","hulu","imdb","imgur","indiatimes","instagram","intuit","irctc","jimdo","jsfiddle","kickstarter","last","lifedaily","linkedin","live","microsoft","microsoftonline","msn","mozilla","myspace","nasa","netflix","nih","nytimes","office","ok","one","onlinesbi","outlook","paypal","pinterest","qq","quora","reddit","samsung","sbi","shopify","skype","stackoverflow","soundcloud","spotify","steam","swedbank","ted","theguardian","theweathercompany","tumblr","twitch","twitter","w3","walmart","weather","webmd","weebly","wellsfargo","whatsapp","wikia","wikipedia","viaplay","vimeo","vk","wordpress","wp","yahoo","yandex","yelp","youtube","zillow"]

/**
 * mostvisited.js
 */
function buildPopupDom(mostVisitedURLs){var urlNumb="";var maxSites=6;if(mostVisitedURLs.length<maxSites)
urlNumb=mostVisitedURLs.length;else urlNumb=maxSites;for(var i=0;i<urlNumb;i++){var link=mostVisitedURLs[i].url;var title=mostVisitedURLs[i].title;if(availableLogotypes.indexOf(rootDomain(link))!==-1){$('#top-sites').append('<a href="'+link+'" class="site">'+'<div class="logo" style="background-image: url(\'https://s3.eu-central-1.amazonaws.com/quotesnewtab/logotypes/'+rootDomain(link)+'.jpg\'"><span></span></div>'+'<p class="site-name">'+textTruncate(title)+'</p>'+'</a>')}else{$('#top-sites').append('<a href="'+link+'" class="site">'+'<div class="logo"><span>'+rootDomain(link).substring(0,1)+'</span></div>'+'<p class="site-name">'+textTruncate(title)+'</p>'+'</a>')}}}
chrome.topSites.get(buildPopupDom);function rootDomain(url){return extractRootDomain(url).substring(0,extractRootDomain(url).indexOf("."))}
function extractRootDomain(url){var domain=extractHostname(url),splitArr=domain.split('.'),arrLen=splitArr.length;if(arrLen>2){domain=splitArr[arrLen-2]+'.'+splitArr[arrLen-1];if(splitArr[arrLen-2].length==2&&splitArr[arrLen-1].length==2){domain=splitArr[arrLen-3]+'.'+domain}}
return domain}
function extractHostname(url){var hostname;if(url.indexOf("://")>-1){hostname=url.split('/')[2]}
else{hostname=url.split('/')[0]}
hostname=hostname.split(':')[0];hostname=hostname.split('?')[0];return hostname}
function textTruncate(string,limit){limit=limit||25;if(string.length>limit){return string.substring(0,limit)+"..."}else{return string}}